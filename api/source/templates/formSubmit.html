{% extends "base.html" %}

{% block content %}  
    <style>
    * {
      box-sizing: border-box;
    }

    /* Create four equal columns that floats next to each other */
    .column {
      float: left;
      width: 25%;
      padding: 10px;
    }

    /* Clear floats after the columns */
    .row:after {
      content: "";
      display: table;
      clear: both;
    }
    h5 {
      font-size: 12px;
      font-weight: bold;  
    }
    </style> 
    <div class="container">
      <h2>Submit Form CRUD</h2>
      <br>
      <p>Copy and paste the json format of a request type into the text box and edit to desired request (ie. Insert, Query, Update, Delete)</p>
      <br>
      <br>
      <form id="myForm" class="form-horizontal" action="https://isp-proxy.tacc.utexas.edu/phart/jobs" method="post">
        <div class="form-group">
          <h2> JSON Entry </h2>
          <textarea type="text" class="form-control" id="region"  name="jsonData" row="30" cols="65"></textarea>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <input type="submit"  class="btn btn-default"  value="Submit">
          </div>
        </div>
      </form>
      <br>
      <br>
      <h2>JSON Formats</h2>
      <br>
      <div class="row"> 
        <h3>Insert</h3>
        <br>
        <p>The insert job type adds a single row to the database.</p>
        <br>
        <h4> Input Requirements: </h4>
        <br>
        <p>A parameter data with a key-value dictionary of all columns in the table and the values to be added.</p>
        <br>
        <br>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>data</td>
                <td>A key-value dictionary of all columns in the table and the values to be added</td>
              </tr>
            </tbody>
          </table>
          <br>
          <h4>Example:</h4> 
        </div>
        <br>
        <div class="column">
        <div style="background-color:#e8e8e8; padding: 10px;">
          <h5>{</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "job_type": "insert",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "status": "submitted",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "data": {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "week_id": 1,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "week": "01/01/12",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "price": 1.243,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "volume": 2,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "total_4046": 700,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "total_4225": 800,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "total_4770": 900,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "category": "conventional",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "year": 2012,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "region": "Atlanta"</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp }</h5>
          <h5>}</h5>
        </div>
      </div>
      </div>
      <br>
      <br>
      <div class="row"> 
        <h3>Query</h3>
        <br>
        <p>The query job type retrieves a subset of the database matching given parameters.</p>
        <br>
        <h4> Query Requirements: </h4>
        <br>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>cols</td>
                <td>A list of columns to return</td>
              </tr>
              <tr>
                <td>params</td>
                <td>A list with any number of query parameters</td>
              </tr>
            </tbody>
          </table>
          <br>
          <p>Each parameter must be defined with keys {column, type, value}. Supported operators are equals, greater_than, greater_equal, less_than, less_equal</p>
          <br>
          <h4>Example:</h4> 
        </div>
        <br>
        <div class="column">
        <div style="background-color:#e8e8e8; padding: 10px;">
          <h5>{</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "job_type": "query",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "status": "submitted",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "cols": ["id", "price"],</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "params": [</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "column": "year",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "type": "equals",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "value": 2012</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp },</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "column": "total_4046",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "type": "less_equal",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "value": 700</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp }</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp ]</h5>
          <h5>}</h5>
        </div>
      </div>
      </div>
      <br>
      <br>
      <div class="row"> 
        <h3>Update</h3>
        <br>
        <p>The update job type modifies a subset of the database matching given parameters</p>
        <br>
        <h4> Update Requirements: </h4>
        <br>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>params</td>
                <td>A list with any number of query parameters</td>
              </tr>
              <tr>
                <td>data</td>
                <td>A key-value dictionary of columns to be updated</td>
              </tr>
            </tbody>
          </table>
          <br>
          <p>Each parameter must be defined with keys {column, type, value}. Supported operators are equals, greater_than, greater_equal, less_than, less_equal</p>
          <br>
          <h4>Example:</h4> 
        </div>
        <br>
        <div class="column">
        <div style="background-color:#e8e8e8; padding: 10px;">
          <h5>{</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "job_type": "update",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "status": "submitted",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "params": [</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "column": "year",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "type": "equals",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "value": 2012</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp }</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp ],</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "data": {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "volume": 5,</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "category": "organic"</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp }</h5>
          <h5>}</h5>
        </div>
      </div>
      </div>
      <br>
      <br>
      <div class="row"> 
        <h3>Delete</h3>
        <br>
        <p>The delete job type removes all rows from the database which match given parameters.</p>
        <br>
        <h4> Delete Requirements: </h4>
        <br>
        <p>The delete job accepts a list of parameters params</p>
        <br>
        <br>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>params</td>
                <td>A list with any number of query parameters</td>
              </tr>
            </tbody>
          </table>
          <br>
          <p>Each parameter must be defined with keys {column, type, value}. Supported operators are equals, greater_than, greater_equal, less_than, less_equal</p>
          <br>
          <h4>Example:</h4> 
        </div>
        <br>
        <div class="column">
        <div style="background-color:#e8e8e8; padding: 10px;">
          <h5>{</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "job_type": "delete",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "status": "submitted",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp "params": [</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "column": "year",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "type": "equals",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "value": 2012</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp },</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp {</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "column": "total_4046",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "type": "less_equal",</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp "value": 700</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp }</h5>
          <h5>&nbsp &nbsp &nbsp &nbsp ]</h5>
          <h5>}</h5>
        </div>
      </div>
      </div>
      <br>
      <br>
      <div class="row"> 
        <h2>Column Information</h2>
        <br>
        <p>Below is a list of the columns in the database and a little information about them</p>
        <br>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th>Column Name</th>
                <th>Datatype</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>id</td>
                <td>SERIAL</td>
                <td>PRIMARY KEY</td>
              </tr>
              <tr>
                <td>week_id</td>
                <td>INTEGER</td>
                <td>0-51 where 51 is the first week of the year</td>
              </tr>
              <tr>
                <td>week</td>
                <td>DATE</td>
                <td>The first day of the week</td>
              </tr>
              <tr>
                <td>price</td>
                <td>REAL</td>
                <td>TW average price</td>
              </tr>
              <tr>
                <td>volume</td>
                <td>REAL</td>
                <td>TW sales</td>
              </tr>
              <tr>
                <td>total_4046</td>
                <td>REAL</td>
                <td>TW sales of PLU 4046</td>
              </tr>
              <tr>
                <td>total_4225</td>
                <td>REAL</td>
                <td>TW sales of PLU 4225</td>
              </tr>
              <tr>
                <td>total_4770</td>
                <td>REAL</td>
                <td>TW sales of PLU 4770</td>
              </tr>
              <tr>
                <td>category</td>
                <td>VARCHAR(20)</td>
                <td>{ conventional, organic }</td>
              </tr>
              <tr>
                <td>year</td>
                <td>INTEGER</td>
                <td></td>
              </tr>
              <tr>
                <td>region</td>
                <td>VARCHAR(20)</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        <br>
        <br> 
    </div>    
{% endblock %}
